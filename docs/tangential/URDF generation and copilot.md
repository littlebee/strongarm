

#### URDF generation and VsCode Copilot

This is a journal of my experience in using copilot to generate URDF from a mock arm config (the current 4dof + iphone pan tilt effector config).




### 20241231

It occurred to me from deep in my mind that once dealt with XML also has a schema (duh haha) and there are schema validators.  Let's see what a couple of those online validators have to say about that URDF XML that Claude generated yesterday...

The official schema for URDF is [here](https://github.com/littlebee/strongarm/blob/d13527b5e57598f05cb5dbe802188f13e9146b57/src/commons/to_udrf.py#L116).  I just pasted that into the schema input of the two different tools along with robot_arm.xml generated by Claude yesterday.

Neither tool liked the comment at the top of ROS's schema file.  Once that was removed, both validators gave the error:

```
cos-all-limited.2: The {max occurs} of an element in an 'all' model group must be 0 or 1. The value 'unbounded' for element 'visual' is invalid.
```

I tried using the following tools:
https://www.liquid-technologies.com/online-xsd-validator
https://www.freeformatter.com/xml-validator-xsd.html

Liquid Technologies tool says the "cos-all-limited" error above is just a warning severity.  It also extraneously complains about `<robot>` not being found in the schema

New approach!!?  I want to try giving Claude the actual schema file from which to generate and specify python 3.13.  Just to see how it does. I then want to repeat the experiment with using gpt-4 in copilot.


### 20241230

In addition to switching to XML, I decided I wanted to see what [Claude 3.5 Sonnet preview](https://www.anthropic.com/news/claude-3-5-sonnet) could do.

So I gave it a python file with just a [mock dictionary](https://github.com/littlebee/strongarm/blob/d13527b5e57598f05cb5dbe802188f13e9146b57/src/commons/to_udrf.py#L116) of one of strongarm's arm config files, and asked,  "given the specification for URDF, use ElementTree in python to convert arm_config to a URDF XML file."

It generated code that looked about right, but had one run time error because it assumed that the base Python version on my system (3.9) is what I'm actually using to run the code.  I run the code on 3.13 using Anaconda.

I asked it correct for Python 3.13, and the code runs and produces what looks like valid XML (VSCode plugin thinks is kosh).  Only time and testing will tell if it's valid URDF tho.


### 20241227 - 20241228

struggled to get Copilot (gpt 4) and then myself to generate a URDF.

A subject I know little more (+more) than I did - emphasis on "little".  5 separate run time errors I had to ask it to correct.

It occurs to me that, duh, URDF is XML and there are probably great tools in Python to parse and create XML. I may have led Copilot astray as I did ask it to do the task using [urdfpy](https://urdfpy.readthedocs.io/en/latest/).  I think the tool we really need is [ElementTree](https://docs.python.org/3/library/xml.etree.elementtree.html)